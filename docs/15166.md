# Сохранение карточек
```sql
CREATE TABLE user_favorite_books (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users ON DELETE CASCADE,
    book_id BIGINT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(user_id, book_id)
);
```

**Добавил бы следующие эндпоинты:**
1. POST /favorites # Добавить карточку в избранное. В теле запроса передаётся book_id. 
Для аутентифицированного пользователя (определяемого по токену) выполняем INSERT в user_favorite_books (или IGNORE, если запись уже есть)
2. DELETE /favorites # Удалить книгу из избранного. В теле запроса передаётся book_id. Выполняем DELETE по user_id и book_id.
3. GET /favorites # получить список избранных карточек текущего пользователя. Возвращает массив карточек, JOIN с таблицей books.

**Порядок работы с избранным:**
1. Добавление в избранное: Пользователь на фронте нажимает «добавить в избранное» на конкретной карточке. 
   Фронтенд отправляет запрос POST /favorites с телом { book_id: ... } и токеном. 
   Бэкенд извлекает user_id из токена и выполняет INSERT в user_favorite_books. 
   Если такой сочетание уже есть (конфликт по (user_id, book_id)), можно игнорировать ошибку. 
   В результате карточка считается добавленной в избранное.
2. Удаление из избранного: Аналогично, при нажатии «удалить из избранного» фронтенд шлёт DELETE /favorites с book_id. 
   Бэкенд по user_id и book_id делает DELETE FROM user_favorite_books. После этого карточка перестаёт числиться в избранном пользователя.
3. Просмотр избранного: Когда фронтенд хочет отобразить избранное, он делает GET /favorites. 
   Бэкенд по user_id выполняет запрос вида SELECT book_id FROM user_favorite_books WHERE user_id = ;. 
   Это возвращает список карточек, которые пользователь сохранил.
