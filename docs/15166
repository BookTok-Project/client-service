# Сохранение карточек
```sql
CREATE TABLE user_favorite_cards (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users ON DELETE CASCADE,
    card_id BIGINT NOT NULL REFERENCES cards ON DELETE CASCADE,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(user_id, card_id)
);
```

**Добавил бы следующие эндпоинты:**
1. POST /favorites # Добавить карточку в избранное. В теле запроса передаётся card_id. 
Для аутентифицированного пользователя (определяемого по токену) выполняем INSERT в user_favorite_cards (или IGNORE, если запись уже есть)
2. DELETE /favorites # Удалить карточку из избранного. В теле запроса передаётся card_id. Выполняем DELETE по user_id и card_id.
3. GET /favorites # получить список избранных карточек текущего пользователя. Возвращает массив карточек, JOIN с таблицей cards.

**Порядок работы с избранным:**
1. Добавление в избранное: Пользователь на фронте нажимает «добавить в избранное» на конкретной карточке (с известным card_id). 
   Фронтенд отправляет запрос POST /favorites с телом { card_id: ... } и токеном. 
   Бэкенд извлекает user_id из токена и выполняет INSERT в user_favorite_cards. 
   Если такой сочетание уже есть (конфликт по (user_id, card_id)), можно игнорировать ошибку. 
   В результате карточка считается добавленной в избранное.
2. Удаление из избранного: Аналогично, при нажатии «удалить из избранного» фронтенд шлёт DELETE /favorites с card_id. 
   Бэкенд по user_id и card_id делает DELETE FROM user_favorite_cards. После этого карточка перестаёт числиться в избранном пользователя.
3. Просмотр избранного: Когда фронтенд хочет отобразить избранное, он делает GET /favorites. 
   Бэкенд по user_id выполняет запрос вида SELECT cards.* FROM user_favorite_cards uf JOIN cards ON cards.id = uf.card_id WHERE uf.user_id = ?. 
   Это возвращает список карточек, которые пользователь сохранил.
